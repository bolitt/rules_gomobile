From 18287a24d6d3abd905319629bf037ac04299d76f Mon Sep 17 00:00:00 2001
From: Steeve Morin <steeve@zen.ly>
Date: Thu, 19 Dec 2019 16:28:31 +0100
Subject: [PATCH 3/4] *: add BUILD.bazel files

Signed-off-by: Steeve Morin <steeve@zen.ly>
---
 bind/BUILD.bazel                    | 26 ++++++++++++++++++++++++++
 bind/java/BUILD.bazel               | 24 ++++++++++++++++++++++++
 bind/objc/BUILD.bazel               | 16 ++++++++++++++++
 bind/seq/BUILD.bazel                | 13 +++++++++++++
 cmd/gobind/BUILD.bazel              | 24 ++++++++++++++++++++++++
 internal/binres/BUILD.bazel         | 16 ++++++++++++++++
 internal/importers/BUILD.bazel      |  8 ++++++++
 internal/importers/java/BUILD.bazel |  9 +++++++++
 internal/importers/objc/BUILD.bazel |  9 +++++++++
 internal/mobileinit/BUILD.bazel     | 14 ++++++++++++++
 10 files changed, 159 insertions(+)
 create mode 100644 bind/BUILD.bazel
 create mode 100644 bind/java/BUILD.bazel
 create mode 100644 bind/objc/BUILD.bazel
 create mode 100644 bind/seq/BUILD.bazel
 create mode 100644 cmd/gobind/BUILD.bazel
 create mode 100644 internal/binres/BUILD.bazel
 create mode 100644 internal/importers/BUILD.bazel
 create mode 100644 internal/importers/java/BUILD.bazel
 create mode 100644 internal/importers/objc/BUILD.bazel
 create mode 100644 internal/mobileinit/BUILD.bazel

diff --git a/bind/BUILD.bazel b/bind/BUILD.bazel
new file mode 100644
index 0000000..e204707
--- /dev/null
+++ b/bind/BUILD.bazel
@@ -0,0 +1,26 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "bind.go",
+        "gen.go",
+        "genclasses.go",
+        "gengo.go",
+        "genjava.go",
+        "genobjc.go",
+        "genobjcw.go",
+        "printer.go",
+        "types.go",
+    ],
+    data = [
+        "seq.go.support",
+    ],
+    importpath = "golang.org/x/mobile/bind",
+    visibility = ["//visibility:public"],
+    deps = [
+        "//internal/importers:go_default_library",
+        "//internal/importers/java:go_default_library",
+        "//internal/importers/objc:go_default_library",
+    ],
+)
diff --git a/bind/java/BUILD.bazel b/bind/java/BUILD.bazel
new file mode 100644
index 0000000..68666c8
--- /dev/null
+++ b/bind/java/BUILD.bazel
@@ -0,0 +1,24 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "context_android.c",
+        "context_android.go",
+        "doc.go",
+        "seq_android.h",
+    ],
+    cgo = True,
+    importpath = "golang.org/x/mobile/bind/java",
+    visibility = ["//visibility:public"],
+    deps = select({
+        "@io_bazel_rules_go//go/platform:android": [
+            "//internal/mobileinit:go_default_library",
+        ],
+        "//conditions:default": [],
+    }),
+    data = glob([
+        "*.java",
+        "*.support",
+    ]),
+)
diff --git a/bind/objc/BUILD.bazel b/bind/objc/BUILD.bazel
new file mode 100644
index 0000000..6f3f7c4
--- /dev/null
+++ b/bind/objc/BUILD.bazel
@@ -0,0 +1,16 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "doc.go",
+        "ref.h",
+        "seq_darwin.h",
+    ],
+    data = [
+        "seq_darwin.go.support",
+        "seq_darwin.m.support",
+    ],
+    importpath = "golang.org/x/mobile/bind/objc",
+    visibility = ["//visibility:public"],
+)
diff --git a/bind/seq/BUILD.bazel b/bind/seq/BUILD.bazel
new file mode 100644
index 0000000..f085003
--- /dev/null
+++ b/bind/seq/BUILD.bazel
@@ -0,0 +1,13 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "ref.go",
+        "seq.go",
+        "string.go",
+    ],
+    importpath = "golang.org/x/mobile/bind/seq",
+    visibility = ["//visibility:public"],
+    deps = ["//internal/mobileinit:go_default_library"],
+)
diff --git a/cmd/gobind/BUILD.bazel b/cmd/gobind/BUILD.bazel
new file mode 100644
index 0000000..1594a52
--- /dev/null
+++ b/cmd/gobind/BUILD.bazel
@@ -0,0 +1,24 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_binary", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "doc.go",
+        "gen.go",
+        "main.go",
+    ],
+    importpath = "golang.org/x/mobile/cmd/gobind",
+    visibility = ["//visibility:private"],
+    deps = [
+        "//bind:go_default_library",
+        "//internal/importers:go_default_library",
+        "//internal/importers/java:go_default_library",
+        "//internal/importers/objc:go_default_library",
+    ],
+)
+
+go_binary(
+    name = "gobind",
+    embed = [":go_default_library"],
+    visibility = ["//visibility:public"],
+)
diff --git a/internal/binres/BUILD.bazel b/internal/binres/BUILD.bazel
new file mode 100644
index 0000000..242d7f6
--- /dev/null
+++ b/internal/binres/BUILD.bazel
@@ -0,0 +1,16 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "arsc.go",
+        "binres.go",
+        "binres_string.go",
+        "node.go",
+        "pool.go",
+        "sdk.go",
+        "table.go",
+    ],
+    importpath = "golang.org/x/mobile/internal/binres",
+    visibility = ["//:__subpackages__"],
+)
diff --git a/internal/importers/BUILD.bazel b/internal/importers/BUILD.bazel
new file mode 100644
index 0000000..6c4796c
--- /dev/null
+++ b/internal/importers/BUILD.bazel
@@ -0,0 +1,8 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["ast.go"],
+    importpath = "golang.org/x/mobile/internal/importers",
+    visibility = ["//:__subpackages__"],
+)
diff --git a/internal/importers/java/BUILD.bazel b/internal/importers/java/BUILD.bazel
new file mode 100644
index 0000000..c6684ff
--- /dev/null
+++ b/internal/importers/java/BUILD.bazel
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["java.go"],
+    importpath = "golang.org/x/mobile/internal/importers/java",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/importers:go_default_library"],
+)
diff --git a/internal/importers/objc/BUILD.bazel b/internal/importers/objc/BUILD.bazel
new file mode 100644
index 0000000..c1a050c
--- /dev/null
+++ b/internal/importers/objc/BUILD.bazel
@@ -0,0 +1,9 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
+
+go_library(
+    name = "go_default_library",
+    srcs = ["objc.go"],
+    importpath = "golang.org/x/mobile/internal/importers/objc",
+    visibility = ["//:__subpackages__"],
+    deps = ["//internal/importers:go_default_library"],
+)
diff --git a/internal/mobileinit/BUILD.bazel b/internal/mobileinit/BUILD.bazel
new file mode 100644
index 0000000..9d71e2e
--- /dev/null
+++ b/internal/mobileinit/BUILD.bazel
@@ -0,0 +1,14 @@
+load("@io_bazel_rules_go//go:def.bzl", "go_library")
+
+go_library(
+    name = "go_default_library",
+    srcs = [
+        "ctx_android.go",
+        "mobileinit.go",
+        "mobileinit_android.go",
+        "mobileinit_ios.go",
+    ],
+    cgo = True,
+    importpath = "golang.org/x/mobile/internal/mobileinit",
+    visibility = ["//visibility:public"],
+)
-- 
2.22.0

